# å¼€å‘ç¯å¢ƒè®¾ç½®æŒ‡å—

## ğŸš€ å¿«é€Ÿå¯åŠ¨

### 1. å®‰è£…ä¾èµ–
```bash
npm install
```

### 2. å¯åŠ¨å¼€å‘ç¯å¢ƒ
```bash
# æ–¹æ³•ä¸€ï¼šåŒæ—¶å¯åŠ¨å‰ç«¯å’ŒAPIæœåŠ¡å™¨ï¼ˆæ¨èï¼‰
npm run dev:full

# æ–¹æ³•äºŒï¼šåˆ†åˆ«å¯åŠ¨
# ç»ˆç«¯1 - å¯åŠ¨APIæœåŠ¡å™¨
npm run dev:api

# ç»ˆç«¯2 - å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
npm run dev
```

### 3. è®¿é—®åº”ç”¨
- **å‰ç«¯åº”ç”¨**: http://localhost:3000
- **ç®¡ç†ç•Œé¢**: http://localhost:3000/admin
- **APIæœåŠ¡å™¨**: http://localhost:8788

## ğŸ” ç®¡ç†å‘˜ç™»å½•ä¿¡æ¯

### å¼€å‘ç¯å¢ƒå‡­æ®
- **ç”¨æˆ·å**: `admin`
- **å¯†ç **: `admin123`

## ğŸ“ é¡¹ç›®ç»“æ„

```
anq/
â”œâ”€â”€ src/                    # å‰ç«¯æºç 
â”‚   â”œâ”€â”€ components/         # ç»„ä»¶
â”‚   â”‚   â””â”€â”€ AdminPage.js   # ç®¡ç†ç•Œé¢ç»„ä»¶
â”‚   â”œâ”€â”€ modules/           # æ¨¡å—
â”‚   â”œâ”€â”€ styles/            # æ ·å¼æ–‡ä»¶
â”‚   â””â”€â”€ utils/             # å·¥å…·å‡½æ•°
â”œâ”€â”€ functions/             # Cloudflare Functions (ç”Ÿäº§ç¯å¢ƒ)
â”‚   â””â”€â”€ api/
â”‚       â””â”€â”€ admin/         # ç®¡ç†API
â”œâ”€â”€ dev-server.js          # å¼€å‘ç¯å¢ƒAPIæœåŠ¡å™¨
â”œâ”€â”€ vite.config.js         # Viteé…ç½®
â””â”€â”€ package.json           # é¡¹ç›®é…ç½®
```

## ğŸ› ï¸ å¼€å‘ç¯å¢ƒé…ç½®

### APIä»£ç†é…ç½®
å¼€å‘ç¯å¢ƒä½¿ç”¨Viteä»£ç†å°†APIè¯·æ±‚è½¬å‘åˆ°æœ¬åœ°APIæœåŠ¡å™¨ï¼š

```javascript
// vite.config.js
server: {
  proxy: {
    '/api': {
      target: 'http://localhost:8788',
      changeOrigin: true,
      secure: false
    }
  }
}
```

### å¼€å‘APIæœåŠ¡å™¨
`dev-server.js` æä¾›äº†å®Œæ•´çš„APIæ¨¡æ‹ŸæœåŠ¡ï¼š

- âœ… ç®¡ç†å‘˜è®¤è¯ (`/api/admin/auth`)
- âœ… é¢˜åº“ç®¡ç† (`/api/admin/questions`)
- âœ… è§†é¢‘ç®¡ç† (`/api/admin/videos`)
- âœ… æ•°æ®åˆ†æ (`/api/admin/analytics`)
- âœ… æ€§èƒ½ç›‘æ§ (`/api/v1/analytics/performance`)

## ğŸ”§ å¯ç”¨è„šæœ¬

| è„šæœ¬ | æè¿° |
|------|------|
| `npm run dev` | å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨ (ç«¯å£3000) |
| `npm run dev:api` | å¯åŠ¨APIæ¨¡æ‹ŸæœåŠ¡å™¨ (ç«¯å£8788) |
| `npm run dev:full` | åŒæ—¶å¯åŠ¨å‰ç«¯å’ŒAPIæœåŠ¡å™¨ |
| `npm run dev:functions` | å¯åŠ¨Cloudflare Functionså¼€å‘æœåŠ¡å™¨ |
| `npm run build` | æ„å»ºç”Ÿäº§ç‰ˆæœ¬ |
| `npm run preview` | é¢„è§ˆç”Ÿäº§æ„å»º |

## ğŸ› å¸¸è§é—®é¢˜è§£å†³

### 1. APIè¿æ¥å¤±è´¥
**é”™è¯¯**: `ECONNREFUSED` æˆ– `fetch failed`

**è§£å†³æ–¹æ¡ˆ**:
```bash
# ç¡®ä¿APIæœåŠ¡å™¨æ­£åœ¨è¿è¡Œ
npm run dev:api

# æˆ–è€…ä½¿ç”¨å®Œæ•´å¼€å‘ç¯å¢ƒ
npm run dev:full
```

### 2. ç®¡ç†ç•Œé¢ç™»å½•å¤±è´¥
**é”™è¯¯**: "ç™»å½•å¤±è´¥" æˆ– "ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"

**è§£å†³æ–¹æ¡ˆ**:
1. ç¡®è®¤ä½¿ç”¨æ­£ç¡®çš„å‡­æ®ï¼š
   - ç”¨æˆ·å: `admin`
   - å¯†ç : `admin123`

2. æ£€æŸ¥APIæœåŠ¡å™¨æ˜¯å¦è¿è¡Œï¼š
   ```bash
   curl http://localhost:8788/api/admin/auth
   ```

3. æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ç½‘ç»œé”™è¯¯

### 3. ç«¯å£å†²çª
**é”™è¯¯**: `EADDRINUSE` æˆ–ç«¯å£å·²è¢«å ç”¨

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æŸ¥æ‰¾å ç”¨ç«¯å£çš„è¿›ç¨‹
netstat -ano | findstr :3000
netstat -ano | findstr :8788

# ç»ˆæ­¢è¿›ç¨‹ (Windows)
taskkill /PID <è¿›ç¨‹ID> /F

# æˆ–è€…ä¿®æ”¹ç«¯å£é…ç½®
```

### 4. ä¾èµ–å®‰è£…å¤±è´¥
**é”™è¯¯**: npm install å¤±è´¥

**è§£å†³æ–¹æ¡ˆ**:
```bash
# æ¸…é™¤ç¼“å­˜
npm cache clean --force

# åˆ é™¤node_modulesé‡æ–°å®‰è£…
rm -rf node_modules package-lock.json
npm install

# æˆ–ä½¿ç”¨yarn
yarn install
```

## ğŸ“Š å¼€å‘ç¯å¢ƒç‰¹æ€§

### æ¨¡æ‹Ÿæ•°æ®
å¼€å‘APIæœåŠ¡å™¨æä¾›äº†ä¸°å¯Œçš„æ¨¡æ‹Ÿæ•°æ®ï¼š

- **ç”¨æˆ·æ´»åŠ¨æ•°æ®**: 20ä¸ªæ¨¡æ‹Ÿç”¨æˆ·çš„å­¦ä¹ è®°å½•
- **åˆ†æç»Ÿè®¡**: å®Œæ•´çš„æ•°æ®åˆ†ææŒ‡æ ‡
- **è®¾å¤‡åˆ†å¸ƒ**: ç§»åŠ¨ç«¯ã€æ¡Œé¢ç«¯ã€å¹³æ¿ç«¯ä½¿ç”¨ç»Ÿè®¡
- **å­¦ä¹ è·¯å¾„**: è§†é¢‘ä¼˜å…ˆvsæµ‹è¯•ä¼˜å…ˆçš„åå¥½åˆ†æ

### å®æ—¶æ›´æ–°
- å‰ç«¯ä»£ç ä¿®æ”¹åè‡ªåŠ¨çƒ­é‡è½½
- APIæœåŠ¡å™¨ä¿®æ”¹åéœ€è¦æ‰‹åŠ¨é‡å¯
- æ ·å¼æ–‡ä»¶æ”¯æŒçƒ­æ›´æ–°

### è°ƒè¯•åŠŸèƒ½
- æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ”¯æŒ
- Consoleæ—¥å¿—è¾“å‡º
- ç½‘ç»œè¯·æ±‚ç›‘æ§
- æºç æ˜ å°„æ”¯æŒ

## ğŸš€ éƒ¨ç½²å‡†å¤‡

### ç”Ÿäº§ç¯å¢ƒæ„å»º
```bash
npm run build
```

### é¢„è§ˆç”Ÿäº§æ„å»º
```bash
npm run preview
```

### Cloudflare Pageséƒ¨ç½²
```bash
# é¢„è§ˆéƒ¨ç½²
npm run deploy:preview

# ç”Ÿäº§éƒ¨ç½²
npm run deploy:production
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. **æ£€æŸ¥æ§åˆ¶å°**: æŸ¥çœ‹æµè§ˆå™¨å’Œç»ˆç«¯çš„é”™è¯¯ä¿¡æ¯
2. **éªŒè¯ç«¯å£**: ç¡®è®¤3000å’Œ8788ç«¯å£å¯ç”¨
3. **é‡å¯æœåŠ¡**: å°è¯•é‡å¯å¼€å‘æœåŠ¡å™¨
4. **æ¸…é™¤ç¼“å­˜**: æ¸…é™¤æµè§ˆå™¨ç¼“å­˜å’Œnpmç¼“å­˜
5. **æŸ¥çœ‹æ—¥å¿—**: æ£€æŸ¥APIæœåŠ¡å™¨çš„æ§åˆ¶å°è¾“å‡º

## ğŸ”„ å¼€å‘æµç¨‹

1. **å¯åŠ¨å¼€å‘ç¯å¢ƒ**
   ```bash
   npm run dev:full
   ```

2. **è®¿é—®ç®¡ç†ç•Œé¢**
   - æ‰“å¼€ http://localhost:3000/admin
   - ä½¿ç”¨ admin/admin123 ç™»å½•

3. **å¼€å‘å’Œæµ‹è¯•**
   - ä¿®æ”¹ä»£ç è‡ªåŠ¨çƒ­é‡è½½
   - åœ¨ç®¡ç†ç•Œé¢æµ‹è¯•åŠŸèƒ½
   - æŸ¥çœ‹æ•°æ®åˆ†æç•Œé¢

4. **æ„å»ºå’Œéƒ¨ç½²**
   ```bash
   npm run build
   npm run deploy:preview
   ```

---

**æœ€åæ›´æ–°**: 2024å¹´1æœˆ
**å¼€å‘ç¯å¢ƒ**: Node.js 18+ | npm 9+
**çŠ¶æ€**: âœ… å¼€å‘å°±ç»ª
